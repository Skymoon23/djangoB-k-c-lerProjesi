<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}ALMS University{% endblock %}</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

    <style>
      #confirmModal .modal-content {
        border: none;
        border-radius: 16px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.15);
      }
      
      #confirmModal .modal-body {
        font-size: 1.05rem;
        color: #374151;
        line-height: 1.6;
      }
      
      #confirmModal .btn-confirm {
        background: #dc3545;
        border: none;
        border-radius: 10px;
        padding: 10px 24px;
        font-weight: 600;
        transition: all 0.2s ease;
      }
      
      #confirmModal .btn-confirm:hover {
        background: #bb2d3b;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);
      }
      
      #confirmModal .btn-cancel {
        background: #6c757d;
        border: none;
        border-radius: 10px;
        padding: 10px 24px;
        font-weight: 600;
        color: white;
        transition: all 0.2s ease;
      }
      
      #confirmModal .btn-cancel:hover {
        background: #5a6268;
        transform: translateY(-1px);
      }
    </style>

    {% block extra_head %}{% endblock %}
</head>
<body>

    {% block body %}
        {% block content %}{% endblock %}
    {% endblock %}

    <div class="modal fade" id="confirmModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body" id="confirmModalBody" style="padding: 30px;">
            Bu işlemi gerçekleştirmek istediğinize emin misiniz?
          </div>
          <div class="modal-footer border-0" style="padding: 20px 30px; gap: 12px; border-top: 1px solid #e5e7eb;">
            <button type="button" class="btn btn-cancel" data-bs-dismiss="modal">
              <i class="bi bi-x-circle me-1"></i> İptal
            </button>
            <button type="button" class="btn btn-confirm text-white" id="confirmModalOk">
              <i class="bi bi-check-circle me-1"></i> Onayla
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
      function customConfirm(message) {
        return new Promise((resolve) => {
          const modal = new bootstrap.Modal(document.getElementById('confirmModal'));
          const modalBody = document.getElementById('confirmModalBody');
          const confirmBtn = document.getElementById('confirmModalOk');
          
          modalBody.textContent = message;
          
          const newConfirmBtn = confirmBtn.cloneNode(true);
          confirmBtn.parentNode.replaceChild(newConfirmBtn, confirmBtn);
          
          newConfirmBtn.addEventListener('click', function() {
            modal.hide();
            resolve(true);
          });
          
          const modalElement = document.getElementById('confirmModal');
          modalElement.addEventListener('hidden.bs.modal', function() {
            resolve(false);
          }, { once: true });
          
          modal.show();
        });
      }
      
      function handleFormSubmit(event, message) {
        event.preventDefault();
        customConfirm(message).then(confirmed => {
          if (confirmed) {
            event.target.submit();
          }
        });
        return false;
      }
    </script>

    {% block extra_js %}{% endblock %}
</body>
</html>
